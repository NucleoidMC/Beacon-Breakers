package io.github.haykam821.beaconbreakers.game;

import io.github.haykam821.beaconbreakers.game.phase.BeaconBreakersActivePhase;
import net.minecraft.entity.boss.BossBar;
import net.minecraft.text.Text;
import net.minecraft.text.TranslatableText;
import net.minecraft.util.Tickable;
import xyz.nucleoid.plasmid.widget.BossBarWidget;

public class InvulnerabilityTimerBar implements Tickable {
	private static final Text TITLE = new TranslatableText("text.beaconbreakers.invulnerability.title");
	private static final BossBar.Style STYLE = BossBar.Style.PROGRESS;

	private final BeaconBreakersActivePhase phase;
	private final BossBarWidget widget;

	public InvulnerabilityTimerBar(BeaconBreakersActivePhase phase) {
		this.phase = phase;

		this.widget = BossBarWidget.open(this.phase.getGameWorld().getPlayerSet(), TITLE, BossBar.Color.YELLOW, STYLE);
		this.phase.getGameWorld().addResource(this.widget);
	}

	@Override
	public void tick() {
		this.widget.setProgress(this.phase.getInvulnerability() / (float) this.phase.getConfig().getInvulnerability());
	}

	public void remove() {
		this.widget.close();
	}
} 